<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Car</title>
    <script>
        function cnvs_getCoordinates(e) {
            x=e.clientX;
            y=e.clientY;
            document.getElementById("xycoordinates").innerHTML="Coordinates: (" + x + "," + y + ")";
        }

        function cnvs_clearCoordinates() {
            document.getElementById("xycoordinates").innerHTML="";
        }

        window.onload = function () {
            var x = 80;
            var y = 700;
            var angle = -90;
            var mod = 0;

            var speed = 5;

            var fouten = 0;
            var foutdiv = document.getElementById("fout");

            var car = new Image();
            car.src = "car.png";

            window.addEventListener("keydown", keypress_handler, false);
            window.addEventListener("keyup", keyup_handler, false);

            var moveinterval = setInterval(function () { draw(); }, 30);

            function draw() {
                var canvas = document.getElementById("canvas");
                var context = canvas.getContext("2d");

                context.clearRect(0, 0, 800, 800);

                context.fillRect(0, 0, 10, 800);
                context.fillRect(150, 200, 10, 600);
                context.fillRect(300, 100, 10, 600);
                context.fillRect(450, 200, 10, 600);
                context.fillRect(600, 100, 10, 600);
                context.fillRect(0, 0, 800, 10);
                context.fillRect(0, 100, 600, 10);
                context.fillRect(790, 0, 10, 800);
                context.fillRect(0, 790, 800, 10);
                context.stroke();

                x += (speed*mod) * Math.cos(Math.PI/180 * angle);
                y += (speed*mod) * Math.sin(Math.PI/180 * angle);

                context.save();
                context.translate(x, y);
                context.rotate(Math.PI/180 * angle);
                context.drawImage(car, -(car.width/2), -(car.height/2));
                context.restore();

                if (x >= 760) {
                    x = 759;
                    fouten++;
                } else if (x < 35) {
                    x = 36;
                    fouten++;
                } else if (y >= 760) {
                    y = 759;
                    fouten++;
                } else if (y < 35) {
                    y = 36;
                    fouten++;
                }
                foutdiv.innerHTML = "Fouten: " + fouten + " X: " + x + " Y: " + y;
            }

            function keyup_handler(event) {
                if (event.keyCode == 87 || event.keyCode == 83) {
                    mod = 0;
                }
            }

            function keypress_handler(event) {
                if (event.keyCode == 87) {
                    mod = 1;
                } else if (event.keyCode == 83) {
                    mod = -1;
                } else if (event.keyCode == 65) {
                    angle -= 5;
                } else if (event.keyCode == 68) {
                    angle += 5;
                }
            }
        }
    </script>
</head>
<body>
    <canvas id="canvas" height="800" width="800" style="border: 2px solid #333;" onmousemove="cnvs_getCoordinates(event)" onmouseout="cnvs_clearCoordinates()"></canvas>
    <div id="fout"></div>
    <div id="xycoordinates"></div>
</body>
</html>