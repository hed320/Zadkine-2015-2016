<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Car</title>
    <script>
        function cnvs_getCoordinates(e) {
            x=e.clientX;
            y=e.clientY;
            document.getElementById("xycoordinates").innerHTML="Coordinates: (" + x + "," + y + ")";
        }

        function cnvs_clearCoordinates() {
            document.getElementById("xycoordinates").innerHTML="";
        }

        window.onload = function () {
            var x = 100;
            var y = 680;
            var fouten = 0;
            var fout = document.getElementById("fout");

            var car = new Image();
            car.src = "car.png";

            window.addEventListener("keydown", keypress_handler, false);
            window.addEventListener("keyup", keyup_handler, false);

            var moveinterval = setInterval(function () {
                draw();
            }, 30);

            function draw() {
                var canvas = document.getElementById("canvas");
                var context = canvas.getContext("2d");

                var speed = 5;
                var angle = -90;
                var mod = 0;

                context.clearRect(0, 0, 800, 800);

                context.fillRect(0, 0, 10, 800);
                context.fillRect(200, 150, 10, 650);
                context.fillRect(400, 0, 10, 650);
                context.fillRect(600, 150, 10, 800);
                context.fillRect(0, 0, 800, 10);
                context.fillRect(790, 0, 10, 800);
                context.fillRect(0, 790, 800, 10);
                context.stroke();

                x += (speed*mod) * Math.cos(Math.PI/180 * angle);
                y += (speed*mod) * Math.sin(Math.PI/180 * angle);

                context.save();
                context.translate(x, y);
                context.rotate(Math.PI/180 * angle);
                context.drawImage(car, -(car.width/2), -(car.height/2));
                context.restore();

                if (x >= 800) {
                    x = 800;
                    fouten++;
                } else if ( x < 0) {
                    x = 0;
                    fouten++;
                } else if (y >= 800) {
                    y = 800;
                    fouten++;
                } else if (y < 0) {
                    y = 0;
                    fouten++;
                }
                //console.log("X " + x + "Y " + y);
                fout.innerHTML = "Fouten: " + fouten;
            }

            function keyup_handler(event) {
                if (event.keyCode == 87 || event.keyCode == 83) {
                    mod = 0;
                }
            }

            function keypress_handler(event) {
                if (event.keyCode == 87) {
                    mod = 1;
                } else if (event.keyCode == 83) {
                    mod = -1;
                } else if (event.keyCode == 65) {
                    angle -= 5;
                } else if (event.keyCode == 68) {
                    angle += 5;
                }
            }
        }
    </script>
</head>
<body>
    <canvas id="canvas" height="800" width="800" style="border: 2px solid #333;" onmousemove="cnvs_getCoordinates(event)" onmouseout="cnvs_clearCoordinates()"></canvas>
    <div id="fout"></div>
    <div id="xycoordinates"></div>
</body>
</html>